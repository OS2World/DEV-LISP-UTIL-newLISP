<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>newLISP-tk Intro</title>
  <meta http-equiv="Content-Type"
 content="text/html; charset=iso-8859-1">
  <style type="text/css" media="screen">
<!--

body, h1, h2, h3, h4, p {
   font-family: Georgia, Verdana, Arial, Helvetica, sanserif;
 }

pre, tt {
   font-family: Lucida Console, Courier;
}

-->
  </style>
</head>
<body bgcolor="#ffffff">
<br>
<br>
<br>
<h1 align="center">newLISP-tk 1.37<font size="-1"></font></h1>
<br>
<h4 align="center">An Integration of newLISP<font size="-1">tm</font>
and Tcl/Tk - quick intro</h4>
<br>
<br>
<center>
<font size="-2"><br>
Copyright &copy; 2001-2007 Lutz Mueller.&nbsp; <a
 href="http://www.nuevatec.com">www.nuevatec.com</a>. All rights
reserved.<br>
<br>
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License,<br>
Version 1.2 or any later version published by the Free Software
Foundation; with no Invariant Sections, no Front-Cover Texts,<br>
and no Back-Cover Texts. A copy of the license is included in the
section entitled <a href="#GNUFDL">GNU Free Documentation License</a>.<br>
<br>
The accompanying software is protected by the <a href="#GNUGPL">GNU
General Public License</a> V.2, June 1991.<br>
<br>
newLISP is a trademark of Lutz Mueller.
</font></center>
<br>
<br>
<br>
<br>
<center>
<br>
<h1>Contents</h1>
</center>
<blockquote>
  <blockquote>
    <blockquote> <a href="#introduction">Introduction</a><br>
      <a href="#installation">Installation</a>
      <blockquote> <a href="#LINUX_UNIX"> LINUX and other UNIXs</a><br>
        <a href="#MS_windows">MS Windows</a><br>
        <a href="#newLISP_DLL">newLISP DLL</a><br>
        <a href="#configuration">Configuration</a><br>
        <a href="#remote">Controlling a remote newLISP on a different
computer</a><br>
        <a href="#multiple_tk">Running multiple instances of newLISP-tk</a><br>
        <a href="#multiple_raw">Multiple instances of raw newLISP
without tk</a> </blockquote>
      <a href="#consolewindow">The console window</a><br>
      <a href="#editor">How to use the editor / browser</a><br>
      <a href="#debugger">How to use the Debugger</a><br>
      <a href="#applications">Writing applications with newLISP and
Tcl/Tk</a><br>
      <a href="#delivering">Delivering applications with newLISP-tk</a><br>
      <a href="#special">Special considerations using newLISP-tk</a><br>
      <a href="#options">Options and settings</a><br>
      <a href="#license">License</a><br>
      <a href="#GNUFDL">GNU Free Documentation License</a><br>
      <a href="#GNUGPL">GNU Public License</a> </blockquote>
  </blockquote>
</blockquote>
<br>
<br>
<br>
<br>
<!-- remove following line for PDF conversion -->
<!-- <blockquote> -->
<center>
<h1><a name="introduction"></a>Introduction</h1>
</center>
<p>newLISP-tk is a Graphical User
Interface (GUI) for newLISP based on Tcl/Tk, an Open Source and
platform independent toolkit for GUI applications. newLISP-tk consists
of two parts working together: the newLISP program which is an Open
Source implementation of the programming language
LISP, and newLISP-tk a GUI program to control newLISP written with
a language and GUI toolkit called Tcl/Tk.</p>

<p>Since newLISP-tk v. 0.91
the BWidget set, is also included in the <tt>newlisp-tk.exe</tt>
Win32 GUI executable. For Linux/UNIX installation see the 
<a href="#installation">Installation</a> chapter on how to include 
the BWidget extensions. The BWidget set contains over 30 high-level 
widgets for making professional looking GUI interfaces.</p>

<p>For more information about Tcl/Tk and the BWidget set and their
source code and licensing go to one of the following sites on the
Internet:</p>

<blockquote> 
  <a href="http://tcl.activestate.com">http://www.scriptics.com</a><br>
  <a href="http://tcltk.org">http://tcltk.org</a><br>
  <a href="http://tcl.activestate.com">http://tcl.activestate.com</a><br>
  <a href="http://tcllib.sourceforge.net">http://tcllib.sourceforge.net/</a>
</blockquote>

<p>There is an interactive Tcl/Tk tutorial at:</p>

<blockquote> 
<a href="http://hegel.ittc.ukans.edu/topics/tcltk/tutorial-noplugin/index.html">
http://hegel.ittc.ukans.edu/topics/tcltk/tutorial-noplugin/index.html</a>
</blockquote>

<p>For more information about newLISP and related programs, source and
licensing go to: </p>

<blockquote> <a href="http://sourceforge.net/projects/newlisp">http://sourceforge.net/projects/newlisp</a><br>
  <a href="http://www.newlisp.org">http://www.newlisp.org</a><br>
  <a href="http://www.nuevatec.com">http://www.nuevatec.com</a> 
</blockquote>

<p>While newLISP by itself can only be controlled via a shell or
console window, newLISP-tk adds multiple LISP -aware editors / browsers and a
source code debugger. It also adds the possibility to make newLISP
programs drawing graphics or show graphical widgets of the underlying
operating system like buttons, text entries, list boxes, menus etc.. The
graphical capabilities are delivered by the Tcl/Tk component. Because newLISP
and Tcl/Tk both can be implemented on most operating systems,
newLISP-tk can be used to create LISP applications for a variety of
platforms at the same time.</p>

<p>Note that some features work differently in the bare console version of
newLISP when compared with runnng the newLISP-tk front-end. See the
chapter <a href="#special">Special considerations using newLISP-tk</a> for
details.</p>

<br>
<br>
<center>
<h1><a name="installation"></a>Installation</h1>
</center>
<br>
<h3><a name="LINUX_UNIX"></a>LINUX and other UNIXs</h3>
<p>If a previous installation is present the old <tt>newlisp-tk.config</tt>
file may have to be removed because of changing directory structures in
new versions.</p>
<p>A new file <tt>newlisp-tk.config</tt> can be generated in the home
directory using the <tt>Options/Save settings</tt> function from the
main menu.</p>
<p>The newLISP executable and help and demo files can be installed from
a binary RPM distribution or newLISP can be compiled from source. See
the
file INSTALLATION in the newLISP source distribution in the <span
 style="font-family: courier new,courier,monospace;">newlisp-x.x.x/doc/</span>
directory for details.</p>
<p>Most LINUX distributions include Tcl/Tk by default.
The source distribution contains <tt>newlisp-tk.tcl, </tt>which is
the Tcl/Tk source for newLISP-tk. If Tcl/Tk version 8.4 (or 8.3) is not
installed on your operating system, it is available at the following
Internet sites:</p>
<blockquote> <a href="ftp://ftp.scriptics.com/pub/tcl/">ftp://ftp.scriptics.com/pub/tcl/</a><br>
  <a href="ftp://tcl.activestate.com/pub/tcl/">ftp://tcl.activestate.com/pub/tcl/</a>
</blockquote>
<p>If the BWidget set extension is installed (default on Tcl/Tk 8.4),
the lines 157 and 158 in the file <tt>newlisp-tk.tcl</tt> have to be
out commented to
include the BWidget package and point to the right library path in the
TCL/TK
installation.</p>
<p>The first line in <font face="Courier New, Courier, mono">newlisp-tk.tcl</font>
should point to the correct location of the program <tt>wish</tt>,
which is the Tcl/Tk binary used to run Tcl/Tk programs. By default the
first line of <tt>newlisp-tk.tcl</tt> contains the line:</p>

<blockquote>
<pre>
#!/usr/bin/wish
</pre>
</blockquote>

<p>After installation <tt>newlisp</tt> and <tt>newlisp-tk</tt>
should be in the <tt>/usr/bin</tt> directory, which should be in the
execution path of the OS's environment. The install routine renames <tt>newlisp-tk.tcl</tt>
to <tt>newlisp-tk</tt>. Icons used in <tt>newlisp-tk</tt> are
installed in <tt>/usr/share/newlisp/newlisp-tk/images</tt>.</p>

<p>Demo programs are installed in <tt>/usr/share/newlisp/newlisp-tk</tt>
and doc files are installed in <tt>/usr/share/newlisp/doc</tt>.
Other directories are not used by the newlisp installation process on
LINUX.</p>

<p>To run newLISP-tk just execute:</p>
<blockquote>
  <pre>newlisp-tk<br></pre>
</blockquote>
<p>newLISP-tk comes up with a console window and will launch the
newLISP program automatically. On the first line of the console window
the newLISP copyright notice should appear to confirm successful
startup. </p>
<p>If the copyright notice does not appear than <tt>newlisp-tk</tt>
could not load
<tt>newlisp</tt> or communicate with it. In this case make sure that
port settings in <tt>newlisp-tk.config</tt> are correct.</p>
<p>The file <tt>newlisp-tk.config </tt> can be found in the users
home directory.
If no <tt>newlisp-tk.config</tt> is found, newLISP-tk will start using
default values for all configuration parameters.&nbsp; A <tt>newlisp-tk.config</tt>
file
can be generated by selecting <tt>Options/Save Settings</tt> from
the main console menu. Two different ports should be used for <tt>TCLTKport</tt>
and
<tt>newLISPport</tt> but <tt>newLISPhost</tt> and <tt>TCLTKhost</tt>
should have the
same IP address, normally localhost: <tt>127.0.0.1</tt>.&nbsp; After
an
unsuccessful
startup use the LINUX task manager, i.e.:'<tt>top</tt>' or '<tt>ktop</tt>'
or do a:
'<tt>ps -A</tt>' to make sure that none of the processes <tt>newlisp-tk</tt>
and <tt>newlisp</tt> have been left running after a failed start
attempt. Remove those
processes and start over again executing <tt>newlisp-tk</tt>.</p>
<br>

<h3><a name="MS_windows"></a>MS Windows</h3>
<p>If a an old newLISP-tk installation is present it should be removed
using the uninstaller from the 'Start Menu' in 'Start/Programs/newLISP' or by
using the uninstaller in the control panel 'Add or Remove Programs' applet.</p>

<p>For Win32 based OS's the installer of newLISP-tk for
Windows can be used which contains all components necessary to
run newLISP-tk. The package contains a file called <tt>newlisp-tk.exe</tt>
which is a precompiled and linked <tt>newlisp-tk.tcl</tt> containing all Tcl/Tk
DLLs (Dynamic Link Libraries) necessary. The package also contains the
file <tt>newlisp.exe</tt> which is newLISP compiled for Windows.</p>

<p>Be default the installer installs in the <tt>C:\Program Files\newlisp</tt>, 
where <tt>C:\Program Files</tt> is taken from the PROGRAMFILES
environment variable. The install path can be changed during install.</p>

<p>To run newLISP-tk just execute the file:</p>

<blockquote>
<pre>
newlisp-tk.exe
</pre>
</blockquote>

<p>from the directory where it is installed or by clicking the link
created on the desktop by the installer or by clicking the link in the
Start menu of the Windows task bar.</p>
<p>newLISP-tk comes up with a console window and will launch the
newLISP program automatically. On the first line of the console window
the newLISP startup notice should appear to confirm successful
startup. </p>
<p>If the sign-on message does not appear than <tt>newlisp-tk.exe</tt>
could not load <tt>newlisp.exe</tt> or could communicate with it via
TCP/IP. In this case make sure that port settings and <tt>newLISPbin</tt>
location are specified
correctly in the file <tt>newlisp-tk.config</tt>.</p>
<p>The file <tt>newlisp-tk.config</tt> can be found in the startup
directory of newlisp-tk.exe. If no <tt>newlisp-tk.config</tt> is
found, newLISP-tk will start using default values for all
configuration parameters. A <tt>newlisp-tk.config</tt> file can be
generated by selecting <tt>Options/Save Settings</tt> from the main
console menu.</p>
<p>Two different ports are used for <tt>TCLTKport</tt> and
<tt>newLISPport</tt>
but <tt>newLISPhost</tt> and <tt>TCLTKhost</tt> should have the same
IP address, normally <tt>127.0.0.1</tt>, when running the GUI front-end and the newlisp
executable on the same computer. After an unsuccessful startup use the
Windows Task Manager to make sure that none of the processes
<tt>newlisp-tk.exe</tt>
and <tt>newlisp.exe</tt> has been left running. After a failed start
attempt remove those processes and start over again executing
<tt>newlisp-tk.exe</tt>.</p>
<p>To run newLISP without graphical capabilities just execute</p>
<blockquote>

  <pre>newlisp.exe<br></pre>
</blockquote>
<p>in a command window.</p>
<br>
<a name="newLISP_DLL"></a>
<h3>newLISP DLL</h3>
<p>The Win32 distribution of newLISP-tk also contains a file called <tt>newlisp.dll</tt>.
Note that this file is <u>not</u> required to run newlisp.exe or
newlisp-tk.exe. This file
is newLISP compiled to a DLL (Dynamic Link Library). This file on its
own can be imported
into to other Win32 applications for delivering newLISP functionality
in those applications.
See the main newLISP manual for details.</p>
<br>
<a name="configuration"></a>
<h3>Configuration</h3>
<p>newLISP-tk starts up in a default configuration, which can be
changed and saved to a file from the applications <tt>Options</tt>
menu.
The saved file is named <tt>newlisp-tk.config </tt>and can also be
edited
using a text editor like <tt>vi</tt> on LINUX or <tt>notepad.exe</tt>
on Windows. The configuration file contains some path / file names
which are important
for correct operation. For more details about configuration see the
chapter
<a href="#options">Options and Settings</a>.</p>
<br>
<a name="remote"></a>
<h3>Controlling a remote newLISP on a different computer</h3>
<p>The newLISP-tk GUI front-end and the newLISP executable binary
can run on different computers connected on a TCP/IP network. In order
for this to work, the config file parameters: <tt>newLISPhost</tt> and
<tt>TCLTKhost</tt> must be configured correctly with their respective
IP-numbers
or host names in the file <tt>newlisp-tk.config.</tt></p>
<p>For example the following lines might be included in the file <tt>newlisp-tk.conf</tt>:</p>
<blockquote>
  <pre>set Ide(TCLTKhost) "68.128.23.35"<br>set Ide(TCLTKport) "64003"<br>set Ide(newLISPhost) "mysite.com"<br>set Ide(newLISPport) "64001"<br></pre>
</blockquote>
<p>Note, that either IP-numbers or host names can be used in host
parameters. Any port numbers can be configured, but must be available
with sufficient access rights on the participating computers. newLISP
on the remote computer gets started first by executing:</p>
<blockquote>
  <pre>newlisp -p 64001<br>
  </pre>
</blockquote>
<p>On the local computer start newlisp-tk.exe. The file <tt>newlisp-tk.conf</tt>
should be in the same directory as <tt>newlisp-tk.tcl</tt> (on UNIXs) <tt>or
newlisp-tk.exe</tt> on Windows.
</p>
<p>Speed of the GUI is adequate even on low speed dial-up connected
computer system. Execution speed of Graphics applications depends on
the speed of the link, as each graphics command goes back and forth
over the TCP/IP connection.</p>
<br>
<a name="multiple_tk"></a>
<h3>Running multiple instances of newLISP-tk</h3>
<p>Multiple instance or newLISP-tk can be run, but care must be
taken to configure different ports <tt>newLISPport</tt> and <tt>TCLTKport</tt>
for each instance to avoid conflict. When trying to start up a second
instance without
special configuration a message will appear "socket already in use".</p>
<p>Using the following steps multiple instances of newLISP-tk can
be run on Windows 2000/XP:<br>
</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; (3) Start <span
 style="font-family: courier new,courier,monospace;">newlisp-tk.exe </span>from
a different startup directory containing a modified version of <span
 style="font-family: courier new,courier,monospace;">newlisp-tk.config</span>
.<br>
</p>
<blockquote>
  <p>(2) In the second copy of&nbsp; <span
 style="font-family: courier new,courier,monospace;">newlisp-tk.config</span>
configure <tt>newLISPport</tt> and <tt>TCLTKport</tt> with
different numbers, i.e. <tt>64001</tt> ND <tt>64002</tt> in the
original version of <tt>newlisp-tk.config</tt> and <tt>64101</tt> and
  <tt>64102</tt>
in the second version.</p>
  <p>(3) When creating a Start menu or Desktop link, the startup
directory should be configured for the location of the modified
newlisp-tk.config file. newLISP-tk will always look for it's config
file in the startup directory.<tt></tt></p>
</blockquote>
<p>To run multiple instances of newLISP-tk on LINUX start a second
instance as a different user. In LINUX <tt>newlisp-tk.tcl</tt> is
centrally
installed as <tt>newlisp-tk</tt> in <tt>usr/bin</tt>. When running <tt>newlisp-tk</tt>
it searches for the config file <tt>newlisp-tk.config</tt> the users
home directory.</p>
<br>
<a name="multiple_raw">
</a>
<h3><a name="multiple_raw">Multiple instances of raw newLISP without tk</a></h3>
<p><a name="multiple_raw">When running newLISP in raw mode without the
graphical front-end, no special preparations are necessary to run multiple instances,
just
execute <tt>newlisp.exe</tt> on Windows 2000/XP or <tt>newlisp</tt>
on LINUX for several instances.</a></p>
<a name="multiple_raw"><br>
<br>
</a><a name="consolewindow"></a>
<h2>The console window in newLISP-tk</h2>
<p>newLISP statements can be entered directly in the console window
for evaluation. When entering parentheses the cursor will jump to the
matching parenthesis. This helps to enter LISP expressions with
correctly balanced parentheses. Many <i>Ctrl-key </i>combinations
are available as shortcuts to menu items. The most important functions
are available as icons.</p>
<p>Almost all short cut <i>Ctrl-key </i>combinations are
documented inside the menus or can be read in the bottom status line of
the console when moving the mouse over the icons.</p>
<p>The following keys can be used for editing and retrieval of the
command history and are <u>not</u> documented anywhere else:</p>
<center>
<table border="1" width="50%">
  <tbody>
    <tr>
      <td>Up arrow</td>
      <td>previous entry</td>
    </tr>
    <tr>
      <td>Down arrow</td>
      <td>next entry</td>
    </tr>
    <tr>
      <td>Home or Ctrl-A</td>
      <td>beginning of line or [End]</td>
    </tr>
    <tr>
      <td>End or Ctrl-E</td>
      <td>end of line or [Home]</td>
    </tr>
  </tbody>
</table>
</center>

<p>While in the console window menu, commands can be accessed with
the mouse or with keyboard shortcuts specific to the underlying host
operating system. On Windows press <i>Alt-</i> and the first letter of
the item in the main console menu.</p>

<p>The mouse can also be used to select text for copy / cut / paste
anywhere in the console window. Pressing the right mouse button opens up a pop
up menu. On MacOS X press <i>Ctrl-Button</i> instead.</p>

<p>The <tt>Load ...</tt> option in the <tt>file</tt> menu can be used
to load newLISP source files. The <tt>Save All as ..</tt>. option can
be used to save
the whole contents of the newLISP workspace in to a file. </p>
<br>
<br>
<a name="editor"></a>
<h2>How to use the editor / browser</h2>
<p>To open up a browser / editor select <tt>editor from</tt> the
console
menu or click the icon available. More than one editor / browser
can be open at the same time. The main use of the editor / browser
is for editing newLISP function definitions and for browsing newLISP
code. The editor / browser contains three main areas:</p>
<br>
<h3>The editor window</h3>
<p>When editing text in this window, parenthesis
matching occurs when typing in parentheses. This helps in entering
correctly
balanced LISP expressions. When double clicking the mouse anywhere
in an expression the scope of the current expression will be
highlighted. This helps identifying correct syntax and helps
recognizing the
structure of an expression.</p>
<p>Copy, cut and paste work just like in the console window. To
evaluate a definition select <tt>Evaluate or</tt> <tt>EvaluatePrint</tt>
from the menu. When <tt>Evaluate</tt> is chosen only error conditions
while
evaluating are displayed in the console. When using <tt>EvaluatePrint</tt>
also the result of the evaluation will be printed in the console
window. When
evaluating the editor window always look for output in the console
window.</p>
<p>Although the editor window is normally used only for entering
function definitions, it can also be used for entering any other LISP
expression for evaluation and re-editing. While the console limits
input to only one line, multi line expressions can be entered in the
edit
window.</p>
<p>The right mouse button offers a pop up menu similar to the
console pop up working only on the part in the edit window that is
currently selected.</p>
<p>When editing use <tt>Save Context As</tt> from the <tt>file</tt>
menu to save your work inside a given name space.</p>
<br>
<h3>The context list box</h3>
<p>This list box on the top left of the editor / browser shows the
different newLISP contexts or name spaces. When clicking one of these
with the mouse, the symbols contained in this name space are displayed
in the symbols list box below. Everything contained in a specific
context can be saved by using the <tt>Save Context As</tt> option
in the <tt>File menu</tt>.</p>
<br>
<h3>The variable list box</h3>
<p>This list box contains all symbols of a specific name space or
context. The symbols serve as variable containers or contain LISP
lambda expressions defining user functions. When clicking on these
symbols
their content appears in the editor window and can be modified and
evaluated to make the change effective.</p>
<p>When a symbol is selected it also can be deleted from the name
space using the <font face="Courier New, Courier, mono">Delete</font>
option in the menu. Note that the functions in the SYSTEM name space
should
not be changed and are protected from deletion. These functions
are used by newLISP and newLISP-tk for communicating. Note also
that a symbol should only be deleted if no references to it exist
in other functions. The function <tt>tk</tt> in the MAIN name space is
also protected and should also not be modified as it is used for
communications from newLISP to TK.</p>
<br>
<h3>Keyboard shortcuts</h3>
<p>Many different keyboard shortcuts in form of <i>Ctrl-key </i>combinations
are available in the browser / editor. They are documented in the
menu and visible in the status line at the bottom when moving the
mouse over the icons.</p>
<br>
<br>
<a name="debugger"></a>
<h2>How to use the debugger</h2>
<p>To debug a function close all browsers and open the debugger from
the
consoles main menu. In the console window change to the context, in
which the function to debug is at home. For example: if the function to
debug
is <tt>MyContext:a-func </tt>execute:</p>
<blockquote>
  <pre>(context 'MyContext)<br></pre>
</blockquote>
<p>this will change the current context in the console and for the
debugger.
Next in the console window execute:</p>
<blockquote>
  <pre>(debug (a-func a b c))<br></pre>
</blockquote>
<p>the function <tt>a-func</tt> with its parameters <tt>a b c</tt>
will now appear in the debugger window with the first expression
highlighted. Using the left two buttons in the debugger evaluation
will proceed step wise or entering into each sub expression o evaluated
jumping to the next expression.. The third button can be used to
continue evaluation without debugging. In this case the debugger
closes and evaluation proceeds as if the debugger never has been
open. The last button in the debugger quits the debugging session
and interrupts the evaluation process completely.</p>
<p> Evaluation while debugging is somewhat slower and some of the
pushbuttons in the debugger will be disabled for certain time intervals.</p>
<p>All normal output of evaluation will be directed as usual to the
console window. Error messages will appear in the debugger window and
highlighted in a red color. Optionally debugging can also be controlled
from the console window pressing the keyboard keys S,<tt>N</tt>
<tt>C</tt> or <tt>Q</tt> and <tt>&lt;enter&gt;</tt>. <tt>Ctrl-B </tt>
will switch the focus back to the console window. From the console <tt>Ctrl-G</tt>
will switch back into the debugger.</p>
<p>At any time when the debugger stops, expressions can be
evaluated inn the console window and variables (symbols) can be entered
to inquire their contents. The browser / editor can also be used to
evaluate
expressions or inquire the contents of symbols.</p>
<br>
<h3>Starting debugging during program execution</h3>
<p>Debugging can be started after a program started execution by
inserting <tt>(trace true)</tt> statements before the call to a
user-defined function. After <tt>trace</tt> has been set to <tt>true</tt>
and the program
enters the user defined function, console based debugging will appear
in the console window. The graphical debugger can now be started. After
the first step entering the letter <tt>S</tt> in the console windows
the graphical debugger will take over.</p>
<br>
<br>
<a name="applications"></a>
<h2>Writing applications with newLISP and Tcl/Tk </h2>
<p>This documentation cannot be an introduction to Tcl/Tk. We
recommend studying one of the many introductory books that are
available for Tcl/Tl. The most important elements are presented here
and we recommend
studying the included example programs.</p>
<p>To execute Tcl/Tk statements from newLISP use the <tt>tk</tt>
function. The <tt>tk</tt> function sends a Tcl/Tk statement to the
Tcl/Tk module and evaluates it. Try the following:</p>
<blockquote>
  <pre>(tk "toplevel .mywin")<br></pre>
</blockquote>
<p>will create a top-level window and pop it up over the console. Now
try:</p>
<blockquote>
  <pre>(tk "button .mywin.ok -text OK")<br></pre>
</blockquote>
<p>nothing will change in the top-level window at this time until
entering:</p>
<blockquote>
  <pre>(tk "pack .mywin.ok -padx 10 -pady 10")<br></pre>
</blockquote>
<p>the last line will make the button appear in the window previously
created.</p>
<br>
<h3>Details on the tk function</h3>
<p>The <tt>tk</tt> function can take more than one parameter and will
evaluate
these and concatenate to a string before sending it out to Tcl/Tk. For
example
we could have written the change-color function this way:</p>
<blockquote>
  <pre>(define (change-color) (tk".mywin config -background " color))<br></pre>
</blockquote>
<p>Let us assume we previously assigned a color name to the newLISP
symbol <font face="Courier New, Courier, mono">color</font>:</p>
<blockquote>
  <pre>(set 'color "red")<br></pre>
</blockquote>
<p>The <tt>tk</tt> function will now correctly configure a Tcl/Tk
statement
as previously used, evaluating <tt>color</tt> to <tt>"red"</tt> and
concatenating
it to the previous string. Care must be taken to include spaces for
separating
variables, like the space after the word <tt>-background.</tt></p>
<br>
<h3>Callback functions from Tcl/Tk</h3>
<p>In order to connect the <tt>OK</tt> button to execute a newLISP
function we need a <i>callback</i> initiated from the button press.
This is done as follows:</p>
<p>First we need the newLISP callback function:</p>
<blockquote>
  <pre>(define (say-hello) (println "HELLO WORLD"))<br></pre>
</blockquote>
<p>Now we need to configure the OK button with a command to be executed
on button press:</p>
<blockquote>
  <pre>(tk ".mywin.ok config -command {Newlisp {(say-hello)}}")<br></pre>
</blockquote>
<p>Note the use of different type of parenthesis. Tcl/Tk uses curly
braces to group expressions an arguments. newLISP uses normal round
parenthesis. </p>
<p>When pushing the OK button now, we will see HELLO WORLD twice,
the first is the action from the <tt>println statement</tt>, the
second is the return value from the function <tt>say-hello</tt>, which
is the return value of the last function executed. We can suppress the
display of the return value in the console using the newLISP function <tt>silent:</tt></p>
<blockquote>
  <pre>(tk ".mywin.ok config -command {Newlisp {(silent (say-hello))} }")<br></pre>
</blockquote>
<p>Note, that <tt>Newlisp </tt>is
a Tcl/Tk function used to call back to newLISP, its argument should
always be an expression executed in newLISP enclosed in braces <tt>{ }</tt>,
in this case <tt>(say-hello)</tt>.</p>
<p>On some widgets Tcl/Tk supplies an extra argument to the callback
function, but the built-in Tk function <tt>Newlisp</tt> allows only
one.
Writing a simple wrapper around it solves the problem. The following
example of a Tk scale widget shows this technique:</p>
<blockquote>
  <pre>(context 'SCALE)<br><br>(define (run )<br>  (tk "proc ScaleValue { val } { Newlisp \"(silent (SCALE:set-value $val ) )\" }")<br>  (tk "if {[winfo exists .example] == 1} {destroy .example}")<br>  (tk "toplevel .example")<br>  (tk "scale .example.scale -from -10 -to 20 -length 200 -orient horizontal")<br>  (tk ".example.scale configure -command {ScaleValue}")<br>  (tk "pack .example.scale"))<br> <br>(define (set-value x)<br>  (print x " "))<br> <br>(context 'MAIN) <br></pre>
</blockquote>
<p>Sometimes we want the callback do something back in the TK widget,
i.e. we might want the OK button change the color of the window. First
define a new callback function:</p>
<blockquote>
  <pre>(define (change-color) (tk ".mywin config -background red"))<br></pre>
</blockquote>
<p>Now reconfigure the button:</p>
<blockquote>
  <pre>(tk ".mywin.ok config -command {Newlisp { (change-color) }}")<br></pre>
</blockquote>
<p>Now when clicking the <tt>OK </tt>button the background of <tt>.mywin</tt>
will turn red.</p>
<p>The following example shows how to transfer text from an entry
widget
written in Tcl/Tk to newLISP:</p>
<blockquote>
  <pre>(define (entry )<br>  (tk "if {[winfo exists .entry] == 1} {destroy .entry}")<br>  (tk "toplevel .entry")<br>  (tk "wm title .entry {entry example}")<br>  (tk "entry .entry.e -width 30 -textvariable ::display")<br>  (tk "bind .entry.e &lt;Return&gt; { Newlisp {(silent (get-entry-text))} }")<br>  (tk "pack .entry.e"))<br><br>(define (get-entry-text )<br>  (println (tk "set ::display"))) <br></pre>
</blockquote>
<p>Whenever return/enter key is pressed in the text of the entry widget
will
be printed in the console window.</p>
<br>
<h3>Tcl/Tk variables</h3>
<p>Tcl/Tk variables like for example <tt>$var</tt> will not work when
using
newLISP-tk. Instead of writing:</p>
<blockquote>
  <pre>(tk "set win [toplevel .mywin]")<br>(tk "$win config -background green") ;;this will not work<br></pre>
</blockquote>
<p>This will not work because the variable <tt>win</tt> from
the first statement will not be known in the second statement. As an
alternative both statements could be put together in one <tt>tk</tt>
statement separated by a semicolon <tt>;</tt>:</p>
<p></p>
<blockquote>
  <pre>(tk "set win [toplevel .mywin]; $win config -background green") <br></pre>
</blockquote>
<p>To keep longer Tcl/Tk code portions together and over several lines
see the next chapter.</p>
<p>another way is, to store the contents of the Tcl/Tk variable
in a newLISP variable:</p>
<blockquote>
  <pre>(set 'win (tk "toplevel .mywin"))<br>(tk win " config -background green")<br></pre>
</blockquote>
<p>Observe the space before <tt>config</tt> to separate <tt>.mywin</tt>
and <tt>config </tt>when stringed together by the <tt>tk</tt>
function.
</p>
<p>This will the return value from <tt>(tk "toplevel .mywin")</tt> to
the
newLISP variable <tt>win</tt>. This method also shows, how to pass
variable
content back and forth between newLISP and Tcl/Tk.</p>
<p>As shown previously, variables get lost in between different <tt>tk</tt>
statements because Tcl/Tk statements sent to the Tcl/Tk interpreter are
evaluated inside a subroutine and not on the toplevel. Every variable
created
inside the subroutines name space get lost after the <tt>tk</tt>
statement finished.
There is a way in Tcl/Tk to refer to variables in a global name space
using
the global name space qualifier <tt>::</tt>. This way variables are
conserved
in between <tt>tk</tt> calls:</p>
<blockquote>
  <pre>;; create a variable in the current Tcl/Tk subroutine name space<br><br>(tk "set ::win [toplevel .mywin]")<br>(tk "$::win config -background green")<br></pre>
</blockquote>
<p>The last example uses the last technique but in a bigger example
with a text variable in an entry widget:</p>
<blockquote>
  <pre>(define (test)<br>    (tk "if {[winfo exists .test] == 1} {destroy .test}")<br>    (tk "toplevel .test")<br>    (tk "set ::display {entry!}")<br>    (tk "wm title .test $::display")<br>    (tk "entry .test.e -width 30 -textvariable ::display")<br>    (tk "pack .test.e")) <br></pre>
</blockquote>
<p>This technique is only necessary when the same variable is
referenced from different calls with the <tt>tk</tt> function.
In a contiguous portion of Tcl/Tk code it is not necessary to
use global variables.</p>
<br>
<h3>Large Tcl/Tk portions of code</h3>
<p>Note, that since version 1.0 of newLISP-tk, tk statements may
contain line-breaks. This offers the possibility to pass bigger Tcl/Tk
code portions using one <tt>tk</tt> statement and enclosing bigger
text portions in <tt>[text] ... [/text]</tt> tags:</p>
<blockquote>
  <pre>(context 'SCALE)<br><br>(tk [text]<br>## longer portion of Tcl/Tk source #################################<br><br>proc ScaleValue { val } { <br>    Newlisp "(silent (SCALE:set-value $val ) )" <br>}<br><br>if {[winfo exists .example] == 1} {destroy .example}<br>toplevel .example<br>scale .example.scale -from -10 -to 20 -length 200 -orient horizontal<br>.example.scale configure -command {ScaleValue}<br>pack .example.scale<br><br>####################################################################<br>[/text])<br><br>(define (set-value x)<br>  (print x " "))<br> <br>(context 'MAIN) <br></pre>
</blockquote>
<p>Inside the <tt>[text][/text]</tt> tags quotes <tt>"</tt> and
braces
<tt>{ }</tt> can be used freely. Text between <tt>[text][/text]</tt>
tags
will be passed without any translation.</p>
<br>
<h3>Command line arguments</h3>
<p>When executing<tt>(main-args)</tt> in the newLISP-tk GUI environment
something like the following is returned:</p>
<blockquote>
  <pre>("c:/newlisp/newlisp" "-p" "64001")<br></pre>
</blockquote>
<p>The arguments when loading <tt>newlisp.exe</tt> (Win32) or <tt>newlisp</tt>
(Linux) are shown. The first part can help to identify the startup
directory.
The second and third parameter start up newLISP for communications with
the GUI front-end.
To read command line arguments from the newLISP-tk command line use <tt>(tk-args)</tt>.
For example when starting newLISP-tk as follows:</p>
<blockquote>
  <pre>newlisp-tk myApp.lsp 1 2 3 hello<br></pre>
</blockquote>
<p>the following would be returned from <tt>(tk-args)</tt> in <tt>myApp.lsp</tt>:</p>
<blockquote>
  <pre>("1" "2" "3" "hello")<br></pre>
</blockquote>
<br>
<br>
<a name="delivering"></a>
<h2>Delivering applications with newLISP-tk</h2>
<p>newLISP-tk can take a lisp file as a command line parameter or a
specification
in newlisp-tk.config can tell newlisp-tk.exe to load a newLISP
application. This together
with the ability to hide Tcl/Tk windows enables the delivery of
applications in newLISP-tk where the developer environment is never
visible and the application
has the feel of an independent freestanding application.</p>
<p>The included example <tt>tcltk-app.lsp</tt> illustrates this. On
the
command line and in the newlisp directory enter:</p>
<blockquote>
  <pre>newlisp-tk tcltk-app.lsp<br></pre>
</blockquote>
<p>As an alternative edit <tt>newlisp-tk.config</tt> and add or edit
the specification:</p>
<blockquote>
  <pre>set Ide(newLISPapp) "tcltk-app.lsp"<br></pre>
</blockquote>
<p>Now calling <tt>newlisp-tk</tt> alone will start up <tt>tcltk-app.lsp</tt>
without the need to specify the application on the command line.</p>
<p>A little window will appear with an exit button without ever showing
the
newLISP-tk development environment. In order for this to work <tt>newlisp-tk</tt>
on LINUX or <tt>newlisp-tk.exe</tt> on Windows should be in the
execution path of
the operating system's environment. A link can be created with an
application specific icon on LINUX or Windows 2000/XP and the user will
only be exposed to the
application itself.</p>
<p>This is the contents of <tt>tcltk-app.lsp</tt>:</p>
<blockquote>
  <pre>;; tcltk-app.lsp - application demo<br>
;;
(context 'App)

(define (app-example ) 
    (tk "toplevel .appex")
    (tk "button .appex.bExit -text Exit -command exit")
    (tk "pack .appex.bExit -side top -padx 60 -pady 30")
    (tk "bind .appex &lt;destroy&gt; exit"))

(context 'MAIN)

(tk "wm withdraw .")
(App:app-example)
  </pre>
</blockquote>
<p>The two critical statements are:</p>
<blockquote>
  <pre>(tk "bind .appex &lt;destroy&gt; exit"))<br></pre>
</blockquote>
<p>and</p>
<blockquote>
  <pre>(tk "wm withdraw .")<br></pre>
</blockquote>
<p>The first statement makes sure that the application exits correctly
even if the <tt>Exit</tt> button is not used but the application
window is closed using
the closing icon in the windows frame.</p>
<p>The second statement hides the newLISP-tk development environment.
Another method
to suppress the newLISP-tk console is available. In the file
newlisp-tk.config include
the following line:</p>
<blockquote>
  <pre>set Ide(initCommand) "wm withdraw ."<br></pre>
</blockquote>
<p>This will suppress the newLISP-tk console window without any flicker.</p>
<p>To deliver an application called MyApp on Windows 2000/XP to an end
user the following files should be included:</p>
<center>
<table border="1" width="75%">
  <tbody>
    <tr>
      <th>File name</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>newlisp.exe</td>
      <td>newLISP executable</td>
    </tr>
    <tr>
      <td>newlisp-tk.exe</td>
      <td>newLISP loader GUI and Tcl/Tk runtime libraries</td>
    </tr>
    <tr>
      <td>newlisp-tk.config</td>
      <td>config file, not strictly necessary if default configuration
is Ok, can be generated with <tt>Options/Save</tt></td>
    </tr>
    <tr>
      <td>MyApp</td>
      <td>newLISP source file containing your application</td>
    </tr>
  </tbody>
</table>
</center>
<p>Most installer programs offer facilities to create links with
icons on the operating system's desktop in an automated fashion.</p>
<p>On LINUX only the file MyApp would have to be delivered as Tcl/Tk is
typically
already installed on the system.</p>
<br>
<br>
<a name="special"></a>
<h2>Special considerations using newLISP-tk</h2>
<p>Most of the following considerations are trivial for users familiar
with LINUX or other UNIX like operating systems and for users familiar
running the command shell in Windows, but should be mentioned for
users accustomed to use Windows only via it's graphical user interface.</p>
<p>There are some differences when running newLISP-tk versus
running newLISP using the <tt>newlisp</tt> or <tt>newlisp.exe</tt>
program binary alone.</p>

<ul>
<li>The function <tt>tk</tt> is only available when running
newLISP-tk. All the demo programs included in the newLISP-tk distribution only run
under newLISP-tk for that reason.</li>
<br>
<li>The function <tt>exit</tt> is redefined in newLISP-tk to exit not
only the <tt>newlisp</tt> program but also the newLISP-tk GUI front-end.</li>
<br>
<li>When running newLISP all output which normally goes to <i>standard
out </i> will be redirected to the console window in newLISP-tk and is
not available as <i>standard out</i> for other applications.
When developing programs in typical UNIX style using pipes and I/O
redirections to integrate different programs, it is better to use
the raw newLISP shell binary <tt>newlisp</tt> on LINUX or <tt>newlisp.exe</tt>
on Windows when testing out programs.</li>
<br> 
<li>Some of the programs included as examples in the newLISP source
distribution will not run correctly in newLISP-tk because of the
previously mentioned reasons.</li>
<br>
<li>Some <i>Ctrl-key </i>combinations will work differently in a
raw <tt>newlisp</tt> shell versus in newLISP-tk. I.e. <tt>Ctrl-C </tt>
will copy in newLISP-tk but interrupt/exit the program when running the raw <tt>newlisp</tt>
binary.</li>
<br>
<li>Symbols which are not legal symbols in newLISP source will not be
displayed in the browsers variable window, but will be saved (serialized)
and loaded correctly.</li>
</ul>


<br>
<br>
<a name="options"></a>
<h2>Options and settings</h2>
<p>On startup newLISP-tk tries to read a file called <tt>newlisp-tk.config</tt>.
This file contains Tcl/Tk statements to configure various settings.</p>
<blockquote>
<pre>
# newlisp-tk.config - newLISP Tcl/Tk configuration file
#
# This file is generated by menu "Options/Save settings"
#

set Ide(HelpProgram) "$env(PROGRAMFILES)/Internet Explorer/IEXPLORE.EXE"
set Ide(TCLTKhost) "127.0.0.1"
set Ide(TCLTKport) "64002"
set Ide(WinPosX) "183"
set Ide(WinPosY) "120"
set Ide(consoleBackground) "white"
set Ide(consoleForeground) "navy"
set Ide(consoleHeight) "30"
set Ide(consoleWidth) "80"
set Ide(debuggerBackground) "white"
set Ide(debuggerForeground) "navy"
set Ide(debuggerHeight) "24"
set Ide(debuggerWidth) "65"
set Ide(editorBackground) "white"
set Ide(editorForeground) "navy"
set Ide(editorHeight) "30"
set Ide(editorWidth) "65"
set Ide(fontName) "Fixedsys"
set Ide(fontSize) "10"
set Ide(imageDir) "/freewrap/images"
set Ide(initCommand) ""
set Ide(lispFileExtension) ".lsp"
set Ide(maxHistory) "50"
set Ide(newLISPapp) ""
set Ide(newLISPhost) "127.0.0.1"
set Ide(newLISPport) "64001"
set Ide(platform) "windows"
</pre>
</blockquote>
<p>The previous example of a <tt>newlisp-t.config</tt> file contains
the defaults installed on MS Wndows. Note that Windows accepts forward
slashes in path names as long as they do not occur after a drive letter.</p>

</p>When running on Windows and selecting <tt>Options/Save Settings</tt> from the 
console menu all <span style="font-family: courier new,courier,monospace;">
$env(PROGRAMFILES)</span> specs will be replaced with the correct names of the 
local Windows installation, i.e. <span style="font-family: courier
new,courier,monospace;">C:\Program Files\newlisp</span> on English language Windows. 
When running on LINUX a different file of defaults will be generated. 
The file is generated in Tcl/Tk syntax.</p>

<p>When saving, all quotes are replaced with <tt>{,}</tt> curly braces as
string delimiters. 

<p>While font and color attributes for the console and editor can
be configured from newLISP-tk menus, other attributes have to be
changed manually using a text editor like <tt>vi</tt> or <tt>emacs</tt>
on LINUX or <tt>notepad.exe</tt> on Windows. The settings in the <tt>newlisp-tk.config</tt>
file will then overwrite the default settings
in newLISP-tk for a specific platform.</p>
<p>Note, that on Windows 2000/XP file and directory path names in <span
 style="font-family: courier new,courier,monospace;">newlisp-tk.config</span>
should be
written using the forward slash (like in LINUX/UNIX).</p>
<p>On LINUX all network ports up to 1024 can only be used by the <tt>root</tt>
user. Make sure the port configured is not used by anything else in the
system.
The <tt>TCLKhost</tt> and <tt>newLISPhost</tt> addresses should
not be changed unless care is taken to change the program line for
starting up the <tt>newlisp</tt> or <tt>newlisp.exe</tt> binary
in the source file <tt>newlisp-tk.tcl</tt> . In case that <tt>newlisp</tt>
and the front-end newLISP-tk are running on different machines, the
newlisp binary will have to be launched separately and not
automatically from <tt>newlisp-tk.tcl</tt>, or <tt>newlisp-tk.exe</tt>.</p>
<br>
<br>
<a name="license"></a>
<h2>License</h2>
<p>The source code to newLISP and <tt>newlisp-tk.tcl</tt> is
distributed
under the GNU Public License or GPL, the text of which is included
in this manual.. For the licensing of Tcl/Tk (licensed under another
Open Source license) see:</p>
<blockquote> <a href="http://www.scriptics.com">http://www.scriptics.com</a><br>
  <a href="http://tcllib.sourceforge.net">http://tcllib.sourceforge.net</a>
</blockquote>
<p>The source code for newlisp and newLISP-tk, if not included in
this distribution, can be obtained at the following links:</p>
<blockquote> <a href="http://www.nuevatec.com">http://www.nuevatec.com</a><br>
  <a href="http://www.newlisp.org">http://www.newlisp.org</a><br>
  <a href="http://sourceforge.net/projects/newlisp/">http://sourceforge.net/projects/newlisp/</a>
</blockquote>
<br>
<br>
<hr>
<br>
<br>
<table border="0">
  <tbody>
    <tr>
      <td> <a name="GNUFDL"></a>
      <center>
      <h1><font color="#ff0000">GNU Free Documentation License</font></h1>
      <p>Version 1.2, November 2002</p>
      <p>Copyright (C) 2000,2001,2002 Free Software Foundation, Inc.
59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed. </p>
      </center>
      <br>
      <br>
      <b>0. PREAMBLE</b>
      <p>The purpose of this License is to make a manual, textbook, or
other
functional and useful document "free" in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others. </p>
      <p>This License is a kind of "copyleft", which means that
derivative
works of the document must themselves be free in the same sense. It
complements the GNU General Public License, which is a copyleft
license designed for free software. </p>
      <p>We have designed this License in order to use it for manuals
for
free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does. But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book. We recommend this License
principally for works whose purpose is instruction or reference. </p>
      <p><b>1. APPLICABILITY AND DEFINITIONS</b> </p>
      <p>This License applies to any manual or other work, in any
medium,
that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License. Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein. The "Document", below,
refers to any such manual or work. Any member of the public is a
licensee, and is addressed as "you". You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law. </p>
      <p>A "Modified Version" of the Document means any work containing
the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language. </p>
      <p>A "Secondary Section" is a named appendix or a front-matter
section
of
the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document's overall subject
(or to related matters) and contains nothing that could fall directly
within that overall subject. (Thus, if the Document is in part a
textbook of mathematics, a Secondary Section may not explain any
mathematics.) The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them. </p>
      <p>The "Invariant Sections" are certain Secondary Sections whose
titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License. If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant. The Document may contain zero
Invariant Sections. If the Document does not identify any Invariant
Sections then there are none. </p>
      <p>The "Cover Texts" are certain short passages of text that are
listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License. A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words. </p>
      <p>A "Transparent" copy of the Document means a machine-readable
copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters. A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent.
An image format is not Transparent if used for any substantial amount
of text. A copy that is not "Transparent" is called "Opaque". </p>
      <p>Examples of suitable formats for Transparent copies include
plain
ASCII without markup, Texinfo input format, LaTeX input format, SGML
or XML using a publicly available DTD, and standard-conforming simple
HTML, PostScript or PDF designed for human modification. Examples of
transparent image formats include PNG, XCF and JPG. Opaque formats
include proprietary formats that can be read and edited only by
proprietary word processors, SGML or XML for which the DTD and/or
processing tools are not generally available, and the
machine-generated HTML, PostScript or PDF produced by some word
processors for output purposes only. </p>
      <p>The "Title Page" means, for a printed book, the title page
itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page. For works in
formats which do not have any title page as such, "Title Page" means
the text near the most prominent appearance of the work's title,
preceding the beginning of the body of the text. </p>
      <p>A section "Entitled XYZ" means a named subunit of the Document
whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language. (Here XYZ stands for a
specific section name mentioned below, such as "Acknowledgements",
"Dedications", "Endorsements", or "History".) To "Preserve the Title"
of such a section when you modify the Document means that it remains a
section "Entitled XYZ" according to this definition. </p>
      <p>The Document may include Warranty Disclaimers next to the
notice
which
states that this License applies to the Document. These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License. </p>
      <p><b>2. VERBATIM COPYING</b> </p>
      <p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License. You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute. However, you may accept
compensation in exchange for copies. If you distribute a large enough
number of copies you must also follow the conditions in section 3. </p>
      <p>You may also lend copies, under the same conditions stated
above,
and
you may publicly display copies. </p>
      <p><b>3. COPYING IN QUANTITY</b> </p>
      <p>If you publish printed copies (or copies in media that
commonly have
printed covers) of the Document, numbering more than 100, and the
Document's license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover. Both covers must also clearly and legibly identify
you as the publisher of these copies. The front cover must present
the full title with all words of the title equally prominent and
visible. You may add other material on the covers in addition.
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects. </p>
      <p>If the required texts for either cover are too voluminous to
fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages. </p>
      <p>If you publish or distribute Opaque copies of the Document
numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material.
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public. </p>
      <p>It is requested, but not required, that you contact the
authors of
the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document. </p>
      <p><b>4. MODIFICATIONS</b> </p>
      <p>You may copy and distribute a Modified Version of the Document
under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it. In addition, you must do these things in the Modified Version: </p>
      <p></p>
      <ul>
        <li><b>A.</b> Use in the Title Page (and on the covers, if
any) a title distinct from that of the Document, and from those of
previous versions (which should, if there were any, be listed in the
History section of the Document). You may use the same title as a
previous version if the original publisher of that version gives
permission. </li>
        <li><b>B.</b> List on the Title Page, as authors, one or
more persons or entities responsible for authorship of the
modifications in the Modified Version, together with at least five of
the principal authors of the Document (all of its principal authors, if
it has fewer than five), unless they release you from this requirement.
        </li>
        <li><b>C.</b> State on the Title page the name of the
publisher of the Modified Version, as the publisher. </li>
        <li><b>D.</b> Preserve all the copyright notices of the
Document. </li>
        <li><b>E.</b> Add an appropriate copyright notice for your
modifications adjacent to the other copyright notices. </li>
        <li><b>F.</b> Include, immediately after the copyright
notices, a license notice giving the public permission to use the
Modified Version under the terms of this License, in the form shown in
the Addendum below. </li>
        <li><b>G.</b> Preserve in that license notice the full
lists of Invariant Sections and required Cover Texts given in the
Document's license notice. </li>
        <li><b>H.</b> Include an unaltered copy of this License. </li>
        <li><b>I.</b> Preserve the section Entitled "History",
Preserve its Title, and add to it an item stating at least the title,
year, new authors, and publisher of the Modified Version as given on
the Title Page. If there is no section Entitled "History" in the
Document, create one stating the title, year, authors, and publisher of
the Document as given on its Title Page, then add an item describing
the Modified Version as stated in the previous sentence. </li>
        <li><b>J.</b> Preserve the network location, if any, given
in the Document for public access to a Transparent copy of the
Document, and likewise the network locations given in the Document for
previous versions it was based on. These may be placed in the "History"
section. You may omit a network location for a work that was published
at least four years before the Document itself, or if the original
publisher of the version it refers to gives permission. </li>
        <li><b>K.</b> For any section Entitled "Acknowledgements"
or "Dedications", Preserve the Title of the section, and preserve in
the section all the substance and tone of each of the contributor
acknowledgements and/or dedications given therein. </li>
        <li><b>L.</b> Preserve all the Invariant Sections of the
Document, unaltered in their text and in their titles. Section numbers
or the equivalent are not considered part of the section titles. </li>
        <li><b>M.</b> Delete any section Entitled "Endorsements".
Such a section may not be included in the Modified Version. </li>
        <li><b>N.</b> Do not retitle any existing section to be
Entitled "Endorsements" or to conflict in title with any Invariant
Section. </li>
        <li><b>O.</b> Preserve any Warranty Disclaimers. </li>
      </ul>
      <p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant. To do this, add their titles to the
list of Invariant Sections in the Modified Version's license notice.
These titles must be distinct from any other section titles. </p>
      <p>You may add a section Entitled "Endorsements", provided it
contains
nothing but endorsements of your Modified Version by various
parties--for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard. </p>
      <p>You may add a passage of up to five words as a Front-Cover
Text, and
a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version. Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity. If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one. </p>
      <p>The author(s) and publisher(s) of the Document do not by this
License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version. </p>
      <p><b>5. COMBINING DOCUMENTS</b> </p>
      <p>You may combine the Document with other documents released
under
this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers. </p>
      <p>The combined work need only contain one copy of this License,
and
multiple identical Invariant Sections may be replaced with a single
copy. If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number.
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work. </p>
      <p>In the combination, you must combine any sections Entitled
"History"
in the various original documents, forming one section Entitled
"History"; likewise combine any sections Entitled "Acknowledgements",
and any sections Entitled "Dedications". You must delete all sections
Entitled "Endorsements." </p>
      <p><b>6. COLLECTIONS OF DOCUMENTS</b> </p>
      <p>You may make a collection consisting of the Document and other
documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects. </p>
      <p>You may extract a single document from such a collection, and
distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document. </p>
      <p><b>7. AGGREGATION WITH INDEPENDENT WORKS</b> </p>
      <p>A compilation of the Document or its derivatives with other
separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an "aggregate" if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation's users beyond what the individual works permit.
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document. </p>
      <p>If the Cover Text requirement of section 3 is applicable to
these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document's Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form.
Otherwise they must appear on printed covers that bracket the whole
aggregate. </p>
      <p><b>8. TRANSLATION</b> </p>
      <p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections. You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers. In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail. </p>
      <p>If a section in the Document is Entitled "Acknowledgements",
"Dedications", or "History", the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title. </p>
      <p><b>9. TERMINATION</b> </p>
      <p>You may not copy, modify, sublicense, or distribute the
Document
except
as expressly provided for under this License. Any other attempt to
copy, modify, sublicense or distribute the Document is void, and will
automatically terminate your rights under this License. However,
parties who have received copies, or rights, from you under this
License will not have their licenses terminated so long as such
parties remain in full compliance. </p>
      <p><b>10. FUTURE REVISIONS OF THIS LICENSE</b> </p>
      <p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time. Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns. See
http://www.gnu.org/copyleft/. </p>
      <p>Each version of the License is given a distinguishing version
number.
If the Document specifies that a particular numbered version of this
License "or any later version" applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation. If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation. </p>
      <br>
      <br>
      <hr> <br>
      <br>
      <a name="GNUGPL"></a>
      <center>
      <h1><font color="#ff0000">GNU GENERAL PUBLIC LICENSE</font></h1>
      <p>Version 2, June 1991</p>
      <p>Copyright (C) 1989, 1991 Free Software Foundation, Inc. 675
Mass Ave,
Cambridge, MA 02139, USA. Everyone is permitted to copy and distribute
verbatim copies of this license document, but changing it is not
allowed.</p>
      </center>
      <br>
      <br>
      <p></p>
      <center><b>PREAMBLE</b></center>
      <p></p>
      <p>The licenses for most software are designed to take away your
freedom
to share and change it. By contrast, the GNU General Public License is
intended to guarantee your freedom to share and change free
software--to
make sure the software is free for all its users. This General Public
License
applies to most of the Free Software Foundation's software and to any
other
program whose authors commit to using it. (Some other Free Software
Foundation
software is covered by the GNU Library General Public License instead.)
You can apply it to your programs, too. </p>
      <p> When we speak of free software, we are referring to freedom,
not
price. Our General Public Licenses are designed to make sure that you
have
the freedom to distribute copies of free software (and charge for this
service if you wish), that you receive source code or can get it if you
want it, that you can change the software or use pieces of it in new
free
programs; and that you know you can do these things. </p>
      <p> To protect your rights, we need to make restrictions that
forbid
anyone to deny you these rights or to ask you to surrender the rights.
These restrictions translate to certain responsibilities for you if you
distribute copies of the software, or if you modify it. </p>
      <p> For example, if you distribute copies of such a program,
whether
gratis or for a fee, you must give the recipients all the rights that
you
have. You must make sure that they, too, receive or can get
the source
code. And you must show them these terms so they know their rights. </p>
      <p> We protect your rights with two steps: (1) copyright the
software,
and (2) offer you this license which gives you legal permission to
copy,
distribute and/or modify the software. </p>
      <p> Also, for each author's protection and ours, we want to make
certain
that everyone understands that there is no warranty for this free
software.
If the software is modified by someone else and passed on, we want its
recipients to know that what they have is not the original, so that any
problems introduced by others will not reflect on the original authors'
reputations. </p>
      <p> Finally, any free program is threatened constantly by
software
patents. We wish to avoid the danger that redistributors of a free
program
will individually obtain patent licenses, in effect making the program
proprietary. To prevent this, we have made it clear that any patent
must
be licensed for everyone's free use or not licensed at all. </p>
      <p> The precise terms and conditions for copying, distribution
and
modification follow. <br>
      <br>
      <br>
      <br>
      </p>
      <center>
      <p>GNU GENERAL PUBLIC LICENSE <br>
TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</p>
      </center>
      <p><b>0.</b> This License applies to any program or other work
which contains
a notice placed by the copyright holder saying it may be distributed
under
the terms of this General Public License. The "Program", below, refers
to any such program or work, and a "work based on the Program" means
either
the Program or any derivative work under copyright law: that is to say,
a work containing the Program or a portion of it, either verbatim or
with
modifications and/or translated into another language. (Hereinafter,
translation
is included without limitation in the term "modification".) Each
licensee
is addressed as "you". </p>
      <p> Activities other than copying, distribution and modification
are
not covered by this License; they are outside its scope. The act of
running
the Program is not restricted, and the output from the Program is
covered
only if its contents constitute a work based on the Program
(independent
of having been made by running the Program). Whether that is true
depends
on what the Program does. </p>
      <p><b>1.</b> You may copy and distribute verbatim copies of the
Program's
source code as you receive it, in any medium, provided that you
conspicuously
and appropriately publish on each copy an appropriate copyright notice
and disclaimer of warranty; keep intact all the notices that refer to
this
License and to the absence of any warranty; and give any other
recipients
of the Program a copy of this License along with the Program. </p>
      <p> You may charge a fee for the physical act of transferring a
copy,
and you may at your option offer warranty protection in exchange for a
fee. </p>
      <p><b>2.</b> You may modify your copy or copies of the Program or
any portion
of it, thus forming a work based on the Program, and copy and
distribute
such modifications or work under the terms of Section 1 above, provided
that you also meet all of these conditions: </p>
      <blockquote>
        <p> a) You must cause the modified files to carry prominent
notices
stating that you changed the files and the date of any change. </p>
        <p> b) You must cause any work that you distribute or publish,
that
in whole or in part contains or is derived from the Program or any part
thereof, to be licensed as a whole at no charge to all third parties
under
the terms of this License. </p>
        <p> c) If the modified program normally reads commands
interactively
when run, you must cause it, when started running for such interactive
use in the most ordinary way, to print or display an announcement
including
an appropriate copyright notice and a notice that there is no warranty
(or else, saying that you provide a warranty) and that users may
redistribute
the program under these conditions, and telling the user how to view a
copy of this License. (Exception: if the Program itself is interactive
but does not normally print such an announcement, your work based on
the
Program is not required to print an announcement.) </p>
      </blockquote>
      <p> These requirements apply to the modified work as a whole. If
identifiable
sections of that work are not derived from the Program, and can be
reasonably
considered independent and separate works in themselves, then this
License,
and its terms, do not apply to those sections when you distribute them
as separate works. But when you distribute the same sections as part of
a whole which is a work based on the Program, the distribution of the
whole
must be on the terms of this License, whose permissions for other
licensees
extend to the entire whole, and thus to each and every part regardless
of who wrote it. </p>
      <p> Thus, it is not the intent of this section to claim rights or
contest your rights to work written entirely by you; rather, the intent
is to exercise the right to control the distribution of derivative or
collective
works based on the Program. </p>
      <p> In addition, mere aggregation of another work not based on
the
Program with the Program (or with a work based on the Program) on a
volume
of a storage or distribution medium does not bring the other work under
the scope of this License. </p>
      <p><b>3.</b> You may copy and distribute the Program (or a work
based on
it, under Section 2) in object code or executable form under the terms
of Sections 1 and 2 above provided that you also do one of the
following: </p>
      <blockquote>
        <p> a) Accompany it with the complete corresponding
machine-readable
source code, which must be distributed under the terms of Sections 1
and
2 above on a medium customarily used for software interchange; or, </p>
        <p> b) Accompany it with a written offer, valid for at least
three
years, to give any third party, for a charge no more than your cost of
physically performing source distribution, a complete machine-readable
copy of the corresponding source code, to be distributed under the
terms
of Sections 1 and 2 above on a medium customarily used for software
interchange;
or, </p>
        <p> c) Accompany it with the information you received as to the
offer
to distribute corresponding source code. (This alternative is allowed
only
for noncommercial distribution and only if you received the program in
object code or executable form with such an offer, in accord with
Subsection
b above.) </p>
      </blockquote>
      <p> The source code for a work means the preferred form of the
work
for making modifications to it. For an executable work, complete source
code means all the source code for all modules it contains, plus any
associated
interface definition files, plus the scripts used to control
compilation
and installation of the executable. However, as a special exception,
the
source code distributed need not include anything that is normally
distributed
(in either source or binary form) with the major components (compiler,
kernel, and so on) of the operating system on which the executable
runs,
unless that component itself accompanies the executable. </p>
      <p> If distribution of executable or object code is made by
offering
access to copy from a designated place, then offering equivalent access
to copy the source code from the same place counts as distribution of
the
source code, even though third parties are not compelled to copy the
source
along with the object code. </p>
      <p><b>4.</b> You may not copy, modify, sublicense, or distribute
the Program
except as expressly provided under this License. Any attempt otherwise
to copy, modify, sublicense or distribute the Program is void, and will
automatically terminate your rights under this License. However,
parties
who have received copies, or rights, from you under this License will
not
have their licenses terminated so long as such parties remain in full
compliance. </p>
      <p><b>5.</b> You are not required to accept this License, since
you have
not signed it. However, nothing else grants you permission to modify or
distribute the Program or its derivative works. These actions are
prohibited
by law if you do not accept this License. Therefore, by modifying or
distributing
the Program (or any work based on the Program), you indicate your
acceptance
of this License to do so, and all its terms and conditions for copying,
distributing or modifying the Program or works based on it. </p>
      <p><b>6.</b> Each time you redistribute the Program (or any work
based on
the Program), the recipient automatically receives a license from the
original
licensor to copy, distribute or modify the Program subject to these
terms
and conditions. You may not impose any further restrictions on the
recipients'
exercise of the rights granted herein. You are not responsible for
enforcing
compliance by third parties to this License. </p>
      <p><b>7.</b> If, as a consequence of a court judgment or
allegation of patent
infringement or for any other reason (not limited to patent issues),
conditions
are imposed on you (whether by court order, agreement or otherwise)
that
contradict the conditions of this License, they do not excuse you from
the conditions of this License. If you cannot distribute so as to
satisfy
simultaneously your obligations under this License and any other
pertinent
obligations, then as a consequence you may not distribute the Program
at
all. For example, if a patent license would not permit royalty-free
redistribution
of the Program by all those who receive copies directly or indirectly
through
you, then the only way you could satisfy both it and this License would
be to refrain entirely from distribution of the Program. </p>
      <p> If any portion of this section is held invalid or
unenforceable
under any particular circumstance, the balance of the section is
intended
to apply and the section as a whole is intended to apply in other
circumstances. </p>
      <p> It is not the purpose of this section to induce you to
infringe
any patents or other property right claims or to contest validity of
any
such claims; this section has the sole purpose of protecting the
integrity
of the free software distribution system, which is implemented by
public
license practices. Many people have made generous contributions to the
wide range of software distributed through that system in reliance on
consistent
application of that system; it is up to the author/donor to decide if
he
or she is willing to distribute software through any other system and a
licensee cannot impose that choice. </p>
      <p> This section is intended to make thoroughly clear what is
believed
to be a consequence of the rest of this License. </p>
      <p><b>8.</b> If the distribution and/or use of the Program is
restricted
in certain countries either by patents or by copyrighted interfaces,
the
original copyright holder who places the Program under this License may
add an explicit geographical distribution limitation excluding those
countries,
so that distribution is permitted only in or among countries not thus
excluded.
In such case, this License incorporates the limitation as if written in
the body of this License. </p>
      <p><b>9.</b> The Free Software Foundation may publish revised
and/or new
versions of the General Public License from time to time. Such new
versions
will be similar in spirit to the present version, but may differ in
detail
to address new problems or concerns. </p>
      <p> Each version is given a distinguishing version number. If the
Program specifies a version number of this License which applies to it
and "any later version", you have the option of following the terms and
conditions either of that version or of any later version published by
the Free Software Foundation. If the Program does not specify a version
number of this License, you may choose any version ever published by
the
Free Software Foundation. </p>
      <p><b>10.</b> If you wish to incorporate parts of the Program
into other
free programs whose distribution conditions are different, write to the
author to ask for permission. For software which is copyrighted by the
Free Software Foundation, write to the Free Software Foundation; we
sometimes
make exceptions for this. Our decision will be guided by the two goals
of preserving the free status of all derivatives of our free software
and
of promoting the sharing and reuse of software generally. <br>
      <br>
      <br>
      <br>
      </p>
      <center>
      <p>NO WARRANTY</p>
      </center>
      <p></p>
      <p><b>11.</b> BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE,
THERE IS NO WARRANTY
FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW. EXCEPT WHEN
OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES
PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER
EXPRESSED
OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
MERCHANTABILITY
AND FITNESS FOR A PARTICULAR PURPOSE. THE ENTIRE RISK AS TO THE QUALITY
AND PERFORMANCE OF THE PROGRAM IS WITH YOU. SHOULD THE PROGRAM PROVE
DEFECTIVE,
YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION. </p>
      <p><b>12.</b> IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR
AGREED TO
IN WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY
AND/OR REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU
FOR
DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL
DAMAGES
ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT
NOT
LIMITED TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES
SUSTAINED
BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY
OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF
THE POSSIBILITY OF SUCH DAMAGES. </p>
      <br>
      <br>
      <br>
      <br>
      <center>
      <p>END OF TERMS AND CONDITIONS</p>
      </center>
      </td>
    </tr>
  </tbody>
</table>
<!-- remove following line for PDF conversion -->
<!-- </blockquote> -->
</body>
</html>
